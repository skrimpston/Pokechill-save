



const shop = {}

shop.exchange = {
    icon: item.goldenBottleCap.id,
    name: `Golden Bottle Cap Exchange`,
    price: 10,
    category: `all`,
    effect: function() {item.goldenBottleCap.got++}
}

shop.exchange1 = {
    icon: item.bottleCap.id,
    name: `Bottle Cap Exchange`,
    price: 1,
    currency: `gold`,
    category: `all`,
    effect: function() {item.bottleCap.got+=10}
}

shop.rareCandy = {
    icon: item.rareCandy.id,
    price: 1,
    category: `goods`,
}

shop.abilityPatch = {
    icon: item.abilityPatch.id,
    price: 5,
    category: `goods`,
}

shop.abilityCapsule = {
    icon: item.abilityCapsule.id,
    price: 5,
    currency: `gold`,
    category: `goods`,
}












shop.blackBelt = {
    icon: item.blackBelt.id,
    price: 5,
    category: `held`,
}

shop.blackGlasses = {
    icon: item.blackGlasses.id,
    price: 5,
    category: `held`,
}
shop.charcoal = {
    icon: item.charcoal.id,
    price: 5,
    category: `held`,
}
shop.dragonFang = {
    icon: item.dragonFang.id,
    price: 5,
    category: `held`,
}
shop.fairyFeather = {
    icon: item.fairyFeather.id,
    price: 5,
    category: `held`,
}
shop.hardStone = {
    icon: item.hardStone.id,
    price: 5,
    category: `held`,
}
shop.magnet = {
    icon: item.magnet.id,
    price: 5,
    category: `held`,
}
shop.metalCoat = {
    icon: item.metalCoat.id,
    price: 5,
    category: `held`,
}
shop.miracleSeed = {
    icon: item.miracleSeed.id,
    price: 5,
    category: `held`,
}
shop.mysticWater = {
    icon: item.mysticWater.id,
    price: 5,
    category: `held`,
}

shop.twistedSpoon = {
    icon: item.twistedSpoon.id,
    price: 5,
    category: `held`,
}
shop.neverMeltIce = {
    icon: item.neverMeltIce.id,
    price: 5,
    category: `held`,
}
shop.poisonBarb = {
    icon: item.poisonBarb.id,
    price: 5,
    category: `held`,
}
shop.sharpBeak = {
    icon: item.sharpBeak.id,
    price: 5,
    category: `held`,
}
shop.silkScarf = {
    icon: item.silkScarf.id,
    price: 5,
    category: `held`,
}
shop.silverPowder = {
    icon: item.silverPowder.id,
    price: 5,
    category: `held`,
}
shop.softSand = {
    icon: item.softSand.id,
    price: 5,
    category: `held`,
}
shop.spellTag = {
    icon: item.spellTag.id,
    price: 5,
    category: `held`,
}

shop.luckyEgg = {
    icon: item.luckyEgg.id,
    price: 2,
    currency: `gold`,
    category: `held`,
}
shop.flameOrb = {
    icon: item.flameOrb.id,
    price: 2,
    currency: `gold`,
    category: `held`,
}
shop.toxicOrb = {
    icon: item.toxicOrb.id,
    price: 2,
    currency: `gold`,
    category: `held`,
}
shop.luckIncense = {
    icon: item.luckIncense.id,
    price: 3,
    currency: `gold`,
    category: `held`,
}
shop.pureIncense = {
    icon: item.pureIncense.id,
    price: 3,
    currency: `gold`,
    category: `held`,
}
shop.choiceBand = {
    icon: item.choiceBand.id,
    price: 5,
    currency: `gold`,
    category: `held`,
}
shop.choiceSpecs = {
    icon: item.choiceSpecs.id,
    price: 5,
    currency: `gold`,
    category: `held`,
}
shop.lifeOrb = {
    icon: item.lifeOrb.id,
    price: 5,
    currency: `gold`,
    category: `held`,
}

shop.shinyCharm = {
    icon: item.shinyCharm.id,
    price: 20,
    currency: `gold`,
    category: `held`,
}


















shop.waterStone = {
    icon: item.waterStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.thunderStone = {
    icon: item.thunderStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.sunStone = {
    icon: item.sunStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.ovalStone = {
    icon: item.ovalStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.moonStone = {
    icon: item.moonStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.leafStone = {
    icon: item.leafStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.iceStone = {
    icon: item.iceStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.fireStone = {
    icon: item.fireStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.duskStone = {
    icon: item.duskStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}
shop.dawnStone = {
    icon: item.dawnStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}

shop.shinyStone = {
    icon: item.shinyStone.id,
    price: 1,
    currency: `gold`,
    category: `evolution`,
}

shop.oddRock = {
    icon: item.oddRock.id,
    price: 2,
    currency: `gold`,
    category: `evolution`,
}

shop.linkStone = {
    icon: item.linkStone.id,
    price: 2,
    currency: `gold`,
    category: `evolution`,
}






shop.powerAnklet = {
    icon: item.powerAnklet.id,
    price: 1,
    currency: `gold`,
    category: `genetics`,
}

shop.powerBand = {
    icon: item.powerBand.id,
    price: 1,
    currency: `gold`,
    category: `genetics`,
}

shop.powerBelt = {
    icon: item.powerBelt.id,
    price: 1,
    currency: `gold`,
    category: `genetics`,
}

shop.powerBracer = {
    icon: item.powerBracer.id,
    price: 1,
    currency: `gold`,
    category: `genetics`,
}

shop.powerLens = {
    icon: item.powerLens.id,
    price: 1,
    currency: `gold`,
    category: `genetics`,
}

shop.powerWeight = {
    icon: item.powerWeight.id,
    price: 1,
    currency: `gold`,
    category: `genetics`,
}

shop.everstone = {
    icon: item.everstone.id,
    price: 2,
    currency: `gold`,
    category: `genetics`,
}

shop.energyRoot = {
    icon: item.energyRoot.id,
    price: 2,
    currency: `gold`,
    category: `genetics`,
}

shop.lockCapsule = {
    icon: item.lockCapsule.id,
    price: 3,
    currency: `gold`,
    category: `genetics`,
}

shop.destinyKnot = {
    icon: item.destinyKnot.id,
    price: 5,
    currency: `gold`,
    category: `genetics`,
}


shop.tackleTm = {
    icon: item.tackleTm.id,
    price: 1,
    category: `tm`,
}

shop.leerTm = {
    icon: item.leerTm.id,
    price: 1,
    category: `tm`,
}

shop.quickAttackTm = {
    icon: item.quickAttackTm.id,
    price: 1,
    category: `tm`,
}

shop.bulkUpTm = {
    icon: item.bulkUpTm.id,
    price: 5,
    category: `tm`,
}

shop.thunderWaveTm = {
    icon: item.thunderWaveTm.id,
    price: 5,
    category: `tm`,
}

shop.toxicTm = {
    icon: item.toxicTm.id,
    price: 5,
    category: `tm`,
}

shop.willOWispTm = {
    icon: item.willOWispTm.id,
    price: 5,
    category: `tm`,
}

shop.calmMindTm = {
    icon: item.calmMindTm.id,
    price: 1,
    currency: `gold`,
    category: `tm`,
}

shop.sunnyDayTm = {
    icon: item.sunnyDayTm.id,
    price: 1,
    currency: `gold`,
    category: `tm`,
}

shop.crunchTm = {
    icon: item.crunchTm.id,
    price: 2,
    currency: `gold`,
    category: `tm`,
}

shop.xScissorTm = {
    icon: item.xScissorTm.id,
    price: 2,
    currency: `gold`,
    category: `tm`,
}

shop.moonblastTm = {
    icon: item.moonblastTm.id,
    price: 2,
    currency: `gold`,
    category: `tm`,
}

//temp

shop.nastyPlotTm = {
    icon: item.nastyPlotTm.id,
    price: 3,
    currency: `gold`,
    category: `tm`,
}

shop.swordsDanceTm = {
    icon: item.swordsDanceTm.id,
    price: 3,
    currency: `gold`,
    category: `tm`,
}



shop.fireBlastTm = {
    icon: item.fireBlastTm.id,
    price: 5,
    currency: `gold`,
    category: `tm`,
}

shop.hydroPumpTm = {
    icon: item.hydroPumpTm.id,
    price: 5,
    currency: `gold`,
    category: `tm`,
}

shop.thunderTm = {
    icon: item.thunderTm.id,
    price: 5,
    currency: `gold`,
    category: `tm`,
}

shop.hyperBeamTm = {
    icon: item.hyperBeamTm.id,
    price: 5,
    currency: `gold`,
    category: `tm`,
}

//1,2,5 gold



let shopCategory = undefined

function updateItemShop(){

    document.getElementById("shop-currency").innerHTML = `<img src="img/items/bottleCap.png"> x${item.bottleCap.got}`
    document.getElementById("shop-currency-gold").innerHTML = `<img src="img/items/goldenBottleCap.png"> x${item.goldenBottleCap.got}`


    if (shopCategory == undefined){

    document.getElementById("shop-categories").style.display = "flex"
    document.getElementById("shop-listing").style.display = "none"

        


        return
    }

    document.getElementById("shop-listing").innerHTML = ""

    const goBack = document.createElement("div")
    goBack.id = "shop-back"
    goBack.innerHTML =`
    <svg xmlns="http://www.w3.org/2000/svg" width="256" height="256" viewBox="0 0 256 256"><g fill="currentColor"><path d="M224 56v144a8 8 0 0 1-8 8H40a8 8 0 0 1-8-8V56a8 8 0 0 1 8-8h176a8 8 0 0 1 8 8" opacity="0.2"/><path d="M184 104v32a8 8 0 0 1-8 8H99.31l10.35 10.34a8 8 0 0 1-11.32 11.32l-24-24a8 8 0 0 1 0-11.32l24-24a8 8 0 0 1 11.32 11.32L99.31 128H168v-24a8 8 0 0 1 16 0m48-48v144a16 16 0 0 1-16 16H40a16 16 0 0 1-16-16V56a16 16 0 0 1 16-16h176a16 16 0 0 1 16 16m-16 144V56H40v144z"/></g></svg>
    Go Back`
    document.getElementById("shop-listing").appendChild(goBack);
    goBack.addEventListener("click", () => {
    shopCategory = undefined
    updateItemShop()
    })


    document.getElementById("shop-categories").style.display = "none"
    document.getElementById("shop-listing").style.display = "flex"




    for (let i in shop){

    if (shop[i].category !== shopCategory && shop[i].category !== "all") continue

    if (item[shop[i].icon].type == "held" && item[shop[i].icon].got>= 20) continue
    

    let currency = `bottleCap`
    if (shop[i].currency == "gold") currency = `goldenBottleCap`


    let name = format(shop[i].icon)
    if (shop[i].name) name = shop[i].name

    const div = document.createElement("div");


div.addEventListener("click", () => {

    document.getElementById("tooltipTop").style.display = "none"
    document.getElementById("tooltipTitle").innerHTML = "How many will you buy?"
    document.getElementById("tooltipMid").style.display = "none"

    document.getElementById("tooltipBottom").innerHTML = `
        <span style="display:flex; justify-content:center; width:100%">
            <div data-amount="1"  style="cursor:pointer; font-size:2rem; width:40%" id="prevent-tooltip-exit">x1</div>
            <div data-amount="5"  style="cursor:pointer; font-size:2rem; width:40%">x5</div>
            <div data-amount="10" style="cursor:pointer; font-size:2rem; width:40%">x10</div>
        </span>
    `

    document
        .querySelectorAll("#tooltipBottom div")
        .forEach(el => {
            el.addEventListener("click", () => {
                buyItem(+el.dataset.amount)
            })
        })

    openTooltip()
})

    function buyItem(amount) {
        
        if (item[currency].got>=(shop[i].price*amount)){

            item[currency].got-=shop[i].price*amount

            if (shop[i].effect) {
            for (let l = 0; l < amount; l++) {
            shop[i].effect()
            }
            }
            else {item[shop[i].icon].got+=amount}

            updateItemShop()
            closeTooltip()
        } else{
            document.getElementById("tooltipTitle").innerHTML = "Cant afford";
            document.getElementById("tooltipTop").style.display = "none"    
            document.getElementById("tooltipTop").style.display = "none"    
            document.getElementById("tooltipMid").style.display = "none"
            document.getElementById("tooltipBottom").innerHTML = `You dont have enough Bottle Caps to purchase this<span id="prevent-tooltip-exit"></span>`
        }
    }

    div.dataset.item = shop[i].icon


    if (item[i] && item[i].type=="tm"){ div.innerHTML = `
    <img src="img/items/tm${format(move[item[i].move].type)}.png">
        <span>${name}</span>
    <strong>
        <img src="img/items/${currency}.png">
        x${shop[i].price}
    </strong>
    `;} else {div.innerHTML = `
    <img src="img/items/${shop[i].icon}.png">
        <span>${name}</span>
    <strong>
        <img src="img/items/${currency}.png">
        x${shop[i].price}
    </strong>
    `}


    document.getElementById("shop-listing").appendChild(div);

    


    }







}